openapi: 3.0.3
info:
  title: Stock Club API
  version: 0.1.0
servers:
  - url: http://localhost/api
paths:
  /auth/register:
    post:
      summary: Register a user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email: { type: string }
                phone: { type: string }
                nickname: { type: string }
                password: { type: string }
                passwordConfirm: { type: string }
      responses:
        '201':
          description: created
  /auth/login:
    post:
      summary: Login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email: { type: string }
                password: { type: string }
      responses:
        '200':
          description: ok
  /rooms:
    get:
      summary: List rooms
      responses:
        '200': { description: ok }
    post:
      summary: Create room
      responses:
        '201': { description: created }
  /rooms/mine:
    get:
      summary: Rooms created by current user
      responses:
        '200': { description: ok }
  /rooms/joined:
    get:
      summary: Joined rooms
      responses:
        '200': { description: ok }
  /rooms/{roomId}:
    get:
      summary: Room detail
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
      responses:
        '200': { description: ok }
    delete:
      summary: Delete room
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
      responses:
        '204': { description: deleted }
  /rooms/{roomId}/join:
    post:
      summary: Join room
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
      responses:
        '200': { description: joined }
  /rooms/{roomId}/leave:
    post:
      summary: Leave room
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
      responses:
        '200': { description: left }
  /rooms/{roomId}/trades:
    get:
      summary: Trades in a room
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
      responses:
        '200': { description: ok }
    post:
      summary: Create trade
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
      responses:
        '201': { description: created }
  /rooms/{roomId}/trades/{tradeId}:
    patch:
      summary: Update trade
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
        - in: path
          name: tradeId
          required: true
          schema: { type: string }
      responses:
        '200': { description: ok }
    delete:
      summary: Delete trade
      parameters:
        - in: path
          name: roomId
          required: true
          schema: { type: string }
        - in: path
          name: tradeId
          required: true
          schema: { type: string }
      responses:
        '204': { description: deleted }
  /trades/{tradeId}/comments:
    get:
      summary: List comments
      parameters:
        - in: path
          name: tradeId
          required: true
          schema: { type: string }
      responses:
        '200': { description: ok }
    post:
      summary: Add comment
      parameters:
        - in: path
          name: tradeId
          required: true
          schema: { type: string }
      responses:
        '201': { description: created }
  /me:
    get:
      summary: Profile
      responses:
        '200': { description: ok }
  /me/rooms/created:
    get:
      summary: Rooms created by current user
      responses:
        '200': { description: ok }
  /me/rooms/joined:
    get:
      summary: Rooms joined by current user
      responses:
        '200': { description: ok }
